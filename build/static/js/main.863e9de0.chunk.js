(this["webpackJsonpmulti-step-form-using-mern"]=this["webpackJsonpmulti-step-form-using-mern"]||[]).push([[0],{77:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var s=r(0),a=r.n(s),n=r(41),c=r.n(n),i=r(13),o=r(7),l=r(21),u=r(8),d=r(19),j=r(80),b=r(81),m=r(18),p=r(1),O=function(e){var t=e.user,r=Object(d.a)({defaultValues:{first_name:t.first_name,last_name:t.last_name}}),s=r.register,a=r.handleSubmit,n=r.errors;return Object(p.jsx)(j.a,{className:"input-form",onSubmit:a((function(t){e.updateUser(t),e.history.push("/second")})),children:Object(p.jsxs)(m.a.div,{className:"col-md-6 offset-md-3",initial:{x:"-100vw"},animate:{x:0},transition:{stiffness:150},children:[Object(p.jsxs)(j.a.Group,{controlId:"first_name",children:[Object(p.jsx)(j.a.Label,{children:"First Name"}),Object(p.jsx)(j.a.Control,{type:"text",name:"first_name",placeholder:"Enter your first name",autoComplete:"off",ref:s({required:"First name is required.",pattern:{value:/^[a-zA-Z]+$/,message:"First name should contain only characters."}}),className:"".concat(n.first_name?"input-error":"")}),n.first_name&&Object(p.jsx)("p",{className:"errorMsg",children:n.first_name.message})]}),Object(p.jsxs)(j.a.Group,{controlId:"last_name",children:[Object(p.jsx)(j.a.Label,{children:"Last Name"}),Object(p.jsx)(j.a.Control,{type:"text",name:"last_name",placeholder:"Enter your last name",autoComplete:"off",ref:s({required:"Last name is required.",pattern:{value:/^[a-zA-Z]+$/,message:"Last name should contain only characters."}}),className:"".concat(n.last_name?"input-error":"")}),n.last_name&&Object(p.jsx)("p",{className:"errorMsg",children:n.last_name.message})]}),Object(p.jsx)(b.a,{variant:"primary",type:"submit",children:"Next"})]})})},h=Object(u.g)((function(e){var t=e.location.pathname,r="/"===t,s="/second"===t,n="/third"===t,c="/login"===t;return Object(p.jsx)(a.a.Fragment,{children:c?Object(p.jsx)("div",{}):Object(p.jsxs)("div",{className:"steps",children:[Object(p.jsxs)("div",{className:"".concat(r?"step active":"step"),children:[Object(p.jsx)("div",{children:"1"}),Object(p.jsx)("div",{children:s||n?Object(p.jsx)(l.b,{to:"/",children:"Step 1"}):"Step 1"})]}),Object(p.jsxs)("div",{className:"".concat(s?"step active":"step"),children:[Object(p.jsx)("div",{children:"2"}),Object(p.jsx)("div",{children:n?Object(p.jsx)(l.b,{to:"/second",children:"Step 2"}):"Step 2"})]}),Object(p.jsxs)("div",{className:"".concat("/third"===t?"step active":"step"),children:[Object(p.jsx)("div",{children:"3"}),Object(p.jsx)("div",{children:"Step 3"})]})]})})})),f=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Multi Step Registration"}),Object(p.jsx)(h,{})]})},x=r(5),v=r.n(x),g=r(9),y=r(22),w=r.n(y),_=function(){var e=Object(d.a)(),t=e.register,r=e.handleSubmit,a=e.errors,n=Object(s.useState)(""),c=Object(o.a)(n,2),i=c[0],l=c[1],u=Object(s.useState)(""),m=Object(o.a)(u,2),O=m[0],h=m[1],f=Object(s.useState)(""),x=Object(o.a)(f,2),y=x[0],_=x[1],C=function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,w.a.post("".concat("","/login"),t);case 4:r=e.sent,l("User with the provided credentials found."),h(""),_(r.data),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.t0.response&&(console.log("error",e.t0.response.data),h(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(j.a,{className:"input-form",onSubmit:r(C),children:Object(p.jsxs)("div",{className:"col-md-6 offset-md-3",children:[O?Object(p.jsx)("p",{className:"errorMsg login-error",children:O}):Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"successMsg",children:i}),y&&Object(p.jsxs)("div",{className:"user-details",children:[Object(p.jsx)("p",{children:"Following are the user details:"}),Object(p.jsxs)("div",{children:["First name: ",y.first_name]}),Object(p.jsxs)("div",{children:["Last name: ",y.last_name]}),Object(p.jsxs)("div",{children:["Email: ",y.user_email]}),Object(p.jsxs)("div",{children:["Country: ",y.country]}),Object(p.jsxs)("div",{children:["State: ",y.state]}),Object(p.jsxs)("div",{children:["City: ",y.city]})]})]}),Object(p.jsxs)(j.a.Group,{controlId:"first_name",children:[Object(p.jsx)(j.a.Label,{children:"Email"}),Object(p.jsx)(j.a.Control,{type:"email",name:"user_email",placeholder:"Enter your email address",ref:t({required:"Email is required.",pattern:{value:/^[^@ ]+@[^@ ]+\.[^@ .]{2,}$/,message:"Email is not valid."}}),className:"".concat(a.user_email?"input-error":"")}),a.user_email&&Object(p.jsx)("p",{className:"errorMsg",children:a.user_email.message})]}),Object(p.jsxs)(j.a.Group,{controlId:"password",children:[Object(p.jsx)(j.a.Label,{children:"Password"}),Object(p.jsx)(j.a.Control,{type:"password",name:"user_password",placeholder:"Choose a password",ref:t({required:"Password is required.",minLength:{value:6,message:"Password should have at-least 6 characters."}}),className:"".concat(a.user_password?"input-error":"")}),a.user_password&&Object(p.jsx)("p",{className:"errorMsg",children:a.user_password.message})]}),Object(p.jsx)(b.a,{variant:"primary",type:"submit",children:"Check Login"})]})})},C=function(e){var t=e.user,r=Object(d.a)({defaultValues:{user_email:t.user_email,user_password:t.user_password}}),s=r.register,a=r.handleSubmit,n=r.errors;return Object(p.jsx)(j.a,{className:"input-form",onSubmit:a((function(t){e.updateUser(t),e.history.push("/third")})),children:Object(p.jsxs)(m.a.div,{className:"col-md-6 offset-md-3",initial:{x:"-100vw"},animate:{x:0},transition:{stiffness:150},children:[Object(p.jsxs)(j.a.Group,{controlId:"first_name",children:[Object(p.jsx)(j.a.Label,{children:"Email"}),Object(p.jsx)(j.a.Control,{type:"email",name:"user_email",placeholder:"Enter your email address",autoComplete:"off",ref:s({required:"Email is required.",pattern:{value:/^[^@ ]+@[^@ ]+\.[^@ .]{2,}$/,message:"Email is not valid."}}),className:"".concat(n.user_email?"input-error":"")}),n.user_email&&Object(p.jsx)("p",{className:"errorMsg",children:n.user_email.message})]}),Object(p.jsxs)(j.a.Group,{controlId:"password",children:[Object(p.jsx)(j.a.Label,{children:"Password"}),Object(p.jsx)(j.a.Control,{type:"password",name:"user_password",placeholder:"Choose a password",autoComplete:"off",ref:s({required:"Password is required.",minLength:{value:6,message:"Password should have at-least 6 characters."}}),className:"".concat(n.user_password?"input-error":"")}),n.user_password&&Object(p.jsx)("p",{className:"errorMsg",children:n.user_password.message})]}),Object(p.jsx)(b.a,{variant:"primary",type:"submit",children:"Next"})]})})},N=r(23),S=r.n(N),L=r(30),E=r.n(L),k=function(e){var t=Object(s.useState)([]),r=Object(o.a)(t,2),a=r[0],n=r[1],c=Object(s.useState)([]),l=Object(o.a)(c,2),u=l[0],d=l[1],O=Object(s.useState)([]),h=Object(o.a)(O,2),f=h[0],x=h[1],y=Object(s.useState)(!1),_=Object(o.a)(y,2),C=_[0],N=_[1],L=Object(s.useState)(""),k=Object(o.a)(L,2),q=k[0],I=k[1],G=Object(s.useState)(""),M=Object(o.a)(G,2),U=M[0],P=M[1],F=Object(s.useState)(""),A=Object(o.a)(F,2),$=A[0],z=A[1];Object(s.useEffect)((function(){(function(){var e=Object(g.a)(v.a.mark((function e(){var t,r,s,a,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,S.a.getAllCountries();case 4:t=e.sent,[],r=null===t||void 0===t?void 0:t.map((function(e){return{isoCode:e.isoCode,name:e.name}})),s=r,a=Object(o.a)(s,1),c=a[0],i=(c=void 0===c?{}:c).isoCode,n(r),I(i),N(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),n([]),N(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){(function(){var e=Object(g.a)(v.a.mark((function e(){var t,r,s,a,n,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.getStatesOfCountry(q);case 3:t=e.sent,[],r=null===t||void 0===t?void 0:t.map((function(e){return{isoCode:e.isoCode,name:e.name}})),s=r,a=Object(o.a)(s,1),n=a[0],c=(n=void 0===n?{}:n).isoCode,i=void 0===c?"":c,x([]),z(""),d(r),P(i),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),d([]),x([]),z("");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[q]),Object(s.useEffect)((function(){(function(){var e=Object(g.a)(v.a.mark((function e(){var t,r,s,a,n,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.getCitiesOfState(q,U);case 3:t=e.sent,[],r=null===t||void 0===t?void 0:t.map((function(e){return{name:e.name}})),s=r,a=Object(o.a)(s,1),n=a[0],c=(n=void 0===n?{}:n).name,i=void 0===c?"":c,x(r),z(i),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),x([]);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[U]);var D=function(){var t=Object(g.a)(v.a.mark((function t(r){var s,n,c,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,c=e.user,o={country:null===(s=a.find((function(e){return e.isoCode===q})))||void 0===s?void 0:s.name,state:(null===(n=u.find((function(e){return e.isoCode===U})))||void 0===n?void 0:n.name)||"",city:$},t.next=6,w.a.post("".concat("","/register"),Object(i.a)(Object(i.a)({},c),o));case 6:E.a.fire("Awesome!","You're successfully registered!","success").then((function(t){(t.isConfirmed||t.isDismissed)&&(e.resetUser(),e.history.push("/"))})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response&&(E.a.fire({icon:"error",title:"Oops...",text:t.t0.response.data}),console.log("error",t.t0.response.data));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsx)(j.a,{className:"input-form",onSubmit:D,children:Object(p.jsxs)(m.a.div,{className:"col-md-6 offset-md-3",initial:{x:"-100vw"},animate:{x:0},transition:{stiffness:150},children:[Object(p.jsxs)(j.a.Group,{controlId:"country",children:[C&&Object(p.jsx)("p",{className:"loading",children:"Loading countries. Please wait..."}),Object(p.jsx)(j.a.Label,{children:"Country"}),Object(p.jsx)(j.a.Control,{as:"select",name:"country",value:q,onChange:function(e){return I(e.target.value)},children:a.map((function(e){var t=e.isoCode,r=e.name;return Object(p.jsx)("option",{value:t,children:r},t)}))})]}),Object(p.jsxs)(j.a.Group,{controlId:"state",children:[Object(p.jsx)(j.a.Label,{children:"State"}),Object(p.jsx)(j.a.Control,{as:"select",name:"state",value:U,onChange:function(e){return P(e.target.value)},children:u.length>0?u.map((function(e){var t=e.isoCode,r=e.name;return Object(p.jsx)("option",{value:t,children:r},t)})):Object(p.jsx)("option",{value:"",children:"No state found"},"")})]}),Object(p.jsxs)(j.a.Group,{controlId:"city",children:[Object(p.jsx)(j.a.Label,{children:"City"}),Object(p.jsx)(j.a.Control,{as:"select",name:"city",value:$,onChange:function(e){return z(e.target.value)},children:f.length>0?f.map((function(e){var t=e.name;return Object(p.jsx)("option",{value:t,children:t},t)})):Object(p.jsx)("option",{value:"",children:"No cities found"})})]}),Object(p.jsx)(b.a,{variant:"primary",type:"submit",children:"Register"})]})})},q=function(){var e=Object(s.useState)({}),t=Object(o.a)(e,2),r=t[0],a=t[1],n=function(e){a((function(t){return Object(i.a)(Object(i.a)({},t),e)}))},c=function(){a({})};return Object(p.jsx)(l.a,{children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(f,{}),Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{render:function(e){return Object(p.jsx)(O,Object(i.a)(Object(i.a)({},e),{},{user:r,updateUser:n}))},path:"/",exact:!0}),Object(p.jsx)(u.b,{render:function(e){return Object(p.jsx)(C,Object(i.a)(Object(i.a)({},e),{},{user:r,updateUser:n}))},path:"/second"}),Object(p.jsx)(u.b,{render:function(e){return Object(p.jsx)(k,Object(i.a)(Object(i.a)({},e),{},{user:r,updateUser:n,resetUser:c}))},path:"/third"}),Object(p.jsx)(u.b,{component:_,path:"/login"}),Object(p.jsx)(u.b,{render:function(){return Object(p.jsx)(u.a,{to:"/"})}})]})]})})};r(76),r(77);c.a.render(Object(p.jsx)(q,{}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.863e9de0.chunk.js.map